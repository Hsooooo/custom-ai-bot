# Clawd Bot ê°œë°œ ë¡œë“œë§µ

> ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-26

## í˜„ì¬ ìƒíƒœ ìš”ì•½

### êµ¬í˜„ ì™„ë£Œ
- [x] Garmin ê±´ê°• ë°ì´í„° ë™ê¸°í™” (ìˆ˜ë©´, ì‹¬ë°•ìˆ˜, HRV, ìŠ¤íŠ¸ë ˆìŠ¤, Body Battery)
- [x] PostgreSQL ë°ì´í„° ì €ì¥ (`health_daily` í…Œì´ë¸”)
- [x] Obsidian ë§ˆí¬ë‹¤ìš´ ìë™ ìƒì„±
- [x] í…”ë ˆê·¸ë¨ ë´‡ ê¸°ë³¸ ëª…ë ¹ì–´ (`/status`, `/brief`)
- [x] Docker Compose ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- [x] ìš´ë™ í™œë™ ë°ì´í„° ìˆ˜ì§‘ (`exercise_activity` í…Œì´ë¸”)
- [x] worker-brief (ì•„ì¹¨ ë¸Œë¦¬í•‘ + ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™)
- [x] worker-notes (Obsidian ë…¸íŠ¸ ê´€ë¦¬)
- [x] worker-monitor (ì»¨í…Œì´ë„ˆ ëª¨ë‹ˆí„°ë§)
- [x] Redis í™œìš© (ìºì‹±, Rate Limiting, ì‘ì—… í)

### ë¯¸êµ¬í˜„
- [ ] AI ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸ (Phase 3)
- [ ] ì˜ˆì¸¡ ì•Œë¦¼ (Phase 3)
- [ ] ìŒì„± ì¸í„°í˜ì´ìŠ¤ (Phase 3)
- [ ] ì›¹ ëŒ€ì‹œë³´ë“œ (Phase 3)

---

## Phase 1: ë‹¨ê¸° ê³„íš (ì™„ë£Œ)

### 1.1 ìš´ë™ ë°ì´í„° ìˆ˜ì§‘ âœ…
**ëª©í‘œ**: Garmin Connectì—ì„œ ìš´ë™ í™œë™ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ DBì— ì €ì¥

**êµ¬í˜„ ì™„ë£Œ**:
- [x] `get_activities()` APIë¡œ ìµœê·¼ 10ê°œ ìš´ë™ í™œë™ ì¡°íšŒ
- [x] `exercise_activity` í…Œì´ë¸”ì— UPSERT
- [x] ìš´ë™ ìœ í˜•ë³„ ìƒì„¸ ì •ë³´ ì¶”ì¶œ (ëŸ¬ë‹, ì‚¬ì´í´, ìˆ˜ì˜ ë“±)
- [x] Obsidian `Exercise/` í´ë”ì— ìš´ë™ ë¡œê·¸ ë§ˆí¬ë‹¤ìš´ ìƒì„±
- [x] í˜ì´ìŠ¤ ë³€í™˜ (m/s â†’ min:sec/km)

**ë°ì´í„° ìŠ¤í‚¤ë§ˆ**:
```sql
exercise_activity (
    activity_id BIGINT PRIMARY KEY,
    activity_type TEXT,           -- running, cycling, swimming
    activity_name TEXT,           -- ì‚¬ìš©ì ì§€ì • ì´ë¦„
    start_time TIMESTAMP,
    duration_sec INTEGER,
    distance_meters NUMERIC,
    avg_hr INTEGER,
    max_hr INTEGER,
    avg_pace TEXT,                -- ëŸ¬ë‹ìš© (min/km)
    calories INTEGER,
    elevation_gain NUMERIC,
    raw_data JSONB
)
```

### 1.2 worker-brief êµ¬í˜„ âœ…
**ëª©í‘œ**: ë§¤ì¼ ì•„ì¹¨ ê±´ê°• ë¸Œë¦¬í•‘ ìë™ ì „ì†¡

**êµ¬í˜„ ì™„ë£Œ**:
- [x] ë§¤ì¼ ì˜¤ì „ 7ì‹œ / ì˜¤í›„ 10ì‹œ í…”ë ˆê·¸ë¨ ì•Œë¦¼
- [x] ì–´ì œ ìˆ˜ë©´ ìš”ì•½ + ì˜¤ëŠ˜ Body Battery ìƒíƒœ
- [x] ìµœê·¼ ìš´ë™ í™œë™ ìš”ì•½ (ìµœëŒ€ 3ê°œ)
- [x] ì»¨ë””ì…˜ ê¸°ë°˜ ë™ê¸°ë¶€ì—¬ ë©”ì‹œì§€

**ì•Œë¦¼ í¬ë§·**:
```
ğŸŒ… Good Morning!

ğŸ˜´ ì–´ì œ ìˆ˜ë©´: 7.2ì‹œê°„ (ì ìˆ˜: 85)
ğŸ”‹ Body Battery: 92% â†’ ì¶©ì „ ì™„ë£Œ!
ğŸ’“ ì•ˆì •ì‹œ ì‹¬ë°•ìˆ˜: 58 bpm (HRV: BALANCED)
ğŸ˜° í‰ê·  ìŠ¤íŠ¸ë ˆìŠ¤: 32

ğŸƒ ìµœê·¼ ìš´ë™:
  ğŸƒ 01/25 Morning Run: 5.2km (5:30/km)

---
âœ¨ ì˜¤ëŠ˜ ì»¨ë””ì…˜ ì¢‹ì•„ ë³´ì—¬ìš”! ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!
```

### 1.3 ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì¶”ê°€ âœ…
**ëª©í‘œ**: í•µì‹¬ ê¸°ëŠ¥ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

**êµ¬í˜„ ì™„ë£Œ**:
- [x] pytest ê¸°ë°˜ í…ŒìŠ¤íŠ¸ êµ¬ì¡°
- [x] Garmin ë°ì´í„° íŒŒì‹± í…ŒìŠ¤íŠ¸
- [x] ë§ˆí¬ë‹¤ìš´ ìƒì„± í…ŒìŠ¤íŠ¸
- [x] DB ì¿¼ë¦¬ êµ¬ì¡° í…ŒìŠ¤íŠ¸
- [x] ìƒ˜í”Œ ë°ì´í„° fixtures

**êµ¬ì¡°**:
```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py              # ê³µí†µ fixtures
â”œâ”€â”€ test_db.py               # DB ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_garmin_parser.py    # Garmin íŒŒì‹± í…ŒìŠ¤íŠ¸
â””â”€â”€ test_markdown_generator.py  # ë§ˆí¬ë‹¤ìš´ ìƒì„± í…ŒìŠ¤íŠ¸
```

### 1.4 ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™” âœ…
**ëª©í‘œ**: ì•ˆì •ì ì¸ ìš´ì˜ì„ ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 

**êµ¬í˜„ ì™„ë£Œ**:
- [x] Garmin ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ, ì§€ìˆ˜ ë°±ì˜¤í”„)
- [x] DB ì—°ê²° ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì—°ê²° (retry decorator)
- [x] ì—ëŸ¬ ë°œìƒ ì‹œ í…”ë ˆê·¸ë¨ ì•Œë¦¼
- [x] ë™ê¸°í™” ì™„ë£Œ ì‹œ ì—ëŸ¬ ìš”ì•½ ë¦¬í¬íŠ¸

---

## Phase 2: ì¤‘ê¸° ê³„íš (ì™„ë£Œ)

### 2.1 ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ âœ…
| ì„œë¹„ìŠ¤ | ìš©ë„ | ìƒíƒœ |
|--------|------|------|
| OpenWeatherMap | ë‚ ì”¨ ì •ë³´ â†’ ë¸Œë¦¬í•‘ í¬í•¨ | âœ… ì™„ë£Œ |
| Google Calendar | ì¼ì • ì¡°íšŒ â†’ ë¸Œë¦¬í•‘ í¬í•¨ | âœ… ì™„ë£Œ |
| GitHub | ì»¤ë°‹/PR í˜„í™© â†’ ê°œë°œ ë¸Œë¦¬í•‘ | âœ… ì™„ë£Œ |

**êµ¬í˜„ ë‚´ìš©**:
- `external_services.py`: ì™¸ë¶€ API í†µí•© ëª¨ë“ˆ
- ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸ (httpx)
- ë‚ ì”¨, ì¼ì •, GitHub í™œë™ ì •ë³´ ë¸Œë¦¬í•‘ì— í¬í•¨

### 2.2 Redis í™œìš© âœ…
**êµ¬í˜„ ë‚´ìš©**:
- `redis_utils.py`: Redis ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ
- ìºì‹±: ì™¸ë¶€ API ì‘ë‹µ ìºì‹± (TTL ê¸°ë°˜)
- Rate Limiting: API í˜¸ì¶œ ì œí•œ (Token Bucket)
- Job Queue: ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬

**ìºì‹œ í‚¤**:
- `cache:weather` - 30ë¶„ TTL
- `cache:github` - 15ë¶„ TTL
- `cache:calendar` - 5ë¶„ TTL

### 2.3 worker-notes êµ¬í˜„ âœ…
**ëª©í‘œ**: Obsidian ë…¸íŠ¸ ìë™í™”

**êµ¬í˜„ ë‚´ìš©**:
- ë§¤ì¼ 00:05 ë°ì¼ë¦¬ ë…¸íŠ¸ ìë™ ìƒì„±
- ì¼ìš”ì¼ 21:00 ìœ„í´ë¦¬ ë¦¬ë·° ìë™ ìƒì„±
- í…œí”Œë¦¿ ë³€ìˆ˜ ì¹˜í™˜ (`{{date:YYYY-MM-DD}}` ë“±)
- ê±´ê°• ë°ì´í„° ìë™ ì‚½ì…
- ìµœê·¼ ìš´ë™ í™œë™ í¬í•¨

**ë…¸íŠ¸ êµ¬ì¡°**:
```
obsidian_vault/
â”œâ”€â”€ Daily/
â”‚   â””â”€â”€ 2026-01-26.md
â”œâ”€â”€ Weekly/
â”‚   â””â”€â”€ 2026-W04.md
â””â”€â”€ templates/
    â”œâ”€â”€ Daily_Template.md
    â””â”€â”€ Weekly_Template.md
```

### 2.4 worker-monitor êµ¬í˜„ âœ…
**ëª©í‘œ**: ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

**êµ¬í˜„ ë‚´ìš©**:
- Docker ì»¨í…Œì´ë„ˆ ìƒíƒœ ëª¨ë‹ˆí„°ë§
- ë””ìŠ¤í¬/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì²´í¬
- 5ë¶„ë§ˆë‹¤ í—¬ìŠ¤ ì²´í¬
- ë§¤ì¼ 09:00 í—¬ìŠ¤ ë¦¬í¬íŠ¸
- ì´ìƒ ê°ì§€ ì‹œ í…”ë ˆê·¸ë¨ ì•Œë¦¼

**ëª¨ë‹ˆí„°ë§ í•­ëª©**:
- ì»¨í…Œì´ë„ˆ ìƒíƒœ (running, exited, unhealthy)
- ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ íšŸìˆ˜
- ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ (ê¸°ë³¸ 85% ì„ê³„ê°’)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (ê¸°ë³¸ 85% ì„ê³„ê°’)

---

## Phase 3: ì¥ê¸° ê³„íš

### 3.1 AI ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸
- ì£¼ê°„/ì›”ê°„ ê±´ê°• íŠ¸ë Œë“œ ë¶„ì„
- ìˆ˜ë©´ íŒ¨í„´ â†” ìš´ë™ ìƒê´€ê´€ê³„
- ê°œì¸í™”ëœ ê±´ê°• ì¡°ì–¸ ìƒì„±

### 3.2 ì˜ˆì¸¡ ì•Œë¦¼
- ìˆ˜ë©´ ë¶€ì¡± ì˜ˆì¸¡ â†’ ì¼ì° ìë¼ëŠ” ì•Œë¦¼
- ìŠ¤íŠ¸ë ˆìŠ¤ ì¦ê°€ ì¶”ì„¸ â†’ íœ´ì‹ ê¶Œê³ 
- ìš´ë™ íŒ¨í„´ ê¸°ë°˜ ë‹¤ìŒ ìš´ë™ ì¶”ì²œ

### 3.3 ìŒì„± ì¸í„°í˜ì´ìŠ¤
- Telegram ìŒì„± ë©”ì‹œì§€ ì§€ì›
- TTSë¡œ ë¸Œë¦¬í•‘ ì½ì–´ì£¼ê¸°

### 3.4 ëŒ€ì‹œë³´ë“œ
- ì›¹ ê¸°ë°˜ ê±´ê°• ëŒ€ì‹œë³´ë“œ
- ì‹œê°í™” ì°¨íŠ¸ (ìˆ˜ë©´, ìš´ë™, ì‹¬ë°•ìˆ˜ ì¶”ì´)

---

## ê¸°ìˆ  ìŠ¤íƒ

### í˜„ì¬
- Python 3.10
- PostgreSQL 15
- Redis (ë¯¸ì‚¬ìš©)
- Docker Compose
- python-telegram-bot 20.7
- garminconnect >= 0.2.38

### ì¶”ê°€ ì˜ˆì •
- pytest (í…ŒìŠ¤íŠ¸)
- structlog (êµ¬ì¡°í™” ë¡œê¹…)
- httpx (ë¹„ë™ê¸° HTTP)
- openai / anthropic (AI ì¸ì‚¬ì´íŠ¸)

---

## ë§ˆì¼ìŠ¤í†¤

| ë§ˆì¼ìŠ¤í†¤ | ëª©í‘œ | ìƒíƒœ |
|----------|------|------|
| M1: ìš´ë™ ë°ì´í„° | ìš´ë™ í™œë™ ìˆ˜ì§‘ ë° ì €ì¥ | âœ… ì™„ë£Œ |
| M2: ì•„ì¹¨ ë¸Œë¦¬í•‘ | worker-brief ì™„ì„± | âœ… ì™„ë£Œ |
| M3: í…ŒìŠ¤íŠ¸ | í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 70% | âœ… ì™„ë£Œ |
| M4: ì•ˆì •í™” | ì—ëŸ¬ í•¸ë“¤ë§ ë° ëª¨ë‹ˆí„°ë§ | âœ… ì™„ë£Œ |
| M5: ì™¸ë¶€ ì—°ë™ | Calendar + Weather + GitHub ì—°ë™ | âœ… ì™„ë£Œ |
| M6: Redis | ìºì‹±, Rate Limiting, Job Queue | âœ… ì™„ë£Œ |
| M7: ë…¸íŠ¸ ìë™í™” | worker-notes ì™„ì„± | âœ… ì™„ë£Œ |
| M8: ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ | worker-monitor ì™„ì„± | âœ… ì™„ë£Œ |
| M9: AI ì¸ì‚¬ì´íŠ¸ | íŠ¸ë Œë“œ ë¶„ì„ ê¸°ëŠ¥ | â³ ëŒ€ê¸° |

---

## ì°¸ê³  ìë£Œ

- [Clawd.bot ê³µì‹ ì‚¬ì´íŠ¸](https://clawd.bot)
- [Garmin Connect API (garminconnect ë¼ì´ë¸ŒëŸ¬ë¦¬)](https://github.com/cyberjunky/python-garminconnect)
- [python-telegram-bot ë¬¸ì„œ](https://python-telegram-bot.readthedocs.io/)
